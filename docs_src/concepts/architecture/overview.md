# SAGE æ¶æ„æ€»è§ˆ

> **æœ€åæ›´æ–°**: 2025-10-23

SAGE (Streaming AI aGent Engine) é‡‡ç”¨åˆ†å±‚å•ä½“æ¶æ„ï¼ˆModular Monolithï¼‰ï¼Œç”± 9 ä¸ªç‹¬ç«‹åŒ…ç»„æˆï¼Œæ”¯æŒæ„å»ºé«˜æ€§èƒ½çš„æµå¼ AI Agent åº”ç”¨ã€‚

## ğŸ—ï¸ æ¶æ„å…¨æ™¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L6: Interface Layer (æ¥å£å±‚)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ sage-studio  â”‚         â”‚ sage-tools   â”‚              â”‚
â”‚  â”‚  Web UI      â”‚         â”‚  CLI         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L5: Application Layer (åº”ç”¨å±‚)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  sage-apps   â”‚         â”‚sage-benchmarkâ”‚              â”‚
â”‚  â”‚  åº”ç”¨å®ç°     â”‚         â”‚  æ€§èƒ½æµ‹è¯•     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L4: Middleware Layer (ä¸­é—´ä»¶å±‚)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         sage-middleware                           â”‚  â”‚
â”‚  â”‚  RAG/LLM Operators + Components (Memory, DB)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L3: Core Layer (æ ¸å¿ƒå±‚)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ sage-kernel  â”‚         â”‚  sage-libs   â”‚              â”‚
â”‚  â”‚ æµå¼å¼•æ“      â”‚         â”‚ ç®—æ³•åº“+Agents â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L2: Platform Layer (å¹³å°å±‚)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         sage-platform                             â”‚  â”‚
â”‚  â”‚  Queue, Storage, Service æŠ½è±¡                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L1: Foundation Layer (åŸºç¡€è®¾æ–½å±‚)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         sage-common                               â”‚  â”‚
â”‚  â”‚  Core Types, Config, Utils, Components           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶

### L1: sage-common (åŸºç¡€è®¾æ–½)

- **èŒè´£**: æä¾›é€šç”¨å·¥å…·ã€é…ç½®ã€æ ¸å¿ƒç±»å‹
- **å…³é”®æ¨¡å—**: core, config, utils, components
- **ä¾èµ–**: æ— 
- **æ–‡æ¡£**: [Common â†’](../core/common/overview.md)

### L2: sage-platform (å¹³å°æœåŠ¡)

- **èŒè´£**: æ¶ˆæ¯é˜Ÿåˆ—ã€å­˜å‚¨ã€æœåŠ¡æŠ½è±¡
- **å…³é”®æ¨¡å—**: queue, storage, service
- **ä¾èµ–**: common
- **æ–‡æ¡£**: [Platform â†’](../core/platform/overview.md)

### L3: sage-kernel (æµå¼å¼•æ“)

- **èŒè´£**: æµå¼æ•°æ®å¤„ç†ã€ä»»åŠ¡è°ƒåº¦ã€åˆ†å¸ƒå¼æ‰§è¡Œ
- **å…³é”®æ¨¡å—**: api, operators, runtime
- **ä¾èµ–**: common, platform
- **æ–‡æ¡£**: [Kernel â†’](../core/kernel/overview.md)

### L3: sage-libs (ç®—æ³•åº“)

- **èŒè´£**: Agents æ¡†æ¶ã€RAG å·¥å…·ã€I/O å·¥å…·ã€å·¥ä½œæµä¼˜åŒ–
- **å…³é”®æ¨¡å—**: agents, rag, io, workflow, integrations
- **ä¾èµ–**: common, kernel (å¯é€‰)
- **æ–‡æ¡£**: [Libs â†’](../core/libs/overview.md)

### L4: sage-middleware (ä¸­é—´ä»¶)

- **èŒè´£**: é¢†åŸŸç‰¹å®šç®—å­ï¼ˆRAG, LLMï¼‰å’Œç»„ä»¶ï¼ˆMemory, VectorDBï¼‰
- **å…³é”®æ¨¡å—**: operators, components
- **ä¾èµ–**: common, platform, kernel, libs
- **æ–‡æ¡£**: [Middleware â†’](../../guides/packages/sage-middleware/overview.md)

### L5-L6: åº”ç”¨ä¸æ¥å£

- **sage-apps**: å…·ä½“åº”ç”¨ï¼ˆåŒ»ç–—è¯Šæ–­ã€è§†é¢‘åˆ†æï¼‰
- **sage-benchmark**: æ€§èƒ½åŸºå‡†æµ‹è¯•
- **sage-studio**: Web å¯è§†åŒ–ç•Œé¢
- **sage-tools**: CLI å‘½ä»¤è¡Œå·¥å…·
- **æ–‡æ¡£**: [Applications â†’](../applications/apps/overview.md)

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. åˆ†å±‚æ¶æ„ (Layered Architecture)

- **å•å‘ä¾èµ–**: é«˜å±‚å¯ä»¥ä¾èµ–ä½å±‚ï¼Œåä¹‹ä¸å¯
- **æ¸…æ™°è¾¹ç•Œ**: æ¯å±‚èŒè´£æ˜ç¡®ï¼Œäº’ä¸è¶Šç•Œ
- **å¯æ›¿æ¢æ€§**: åŒå±‚ç»„ä»¶å¯ç‹¬ç«‹æ›¿æ¢

### 2. æ¥å£ä¼˜å…ˆ (Interface-First)

- é€šè¿‡ `__init__.py` æ˜ç¡®å…¬å…± API
- ä½å±‚æä¾›ç¨³å®šæ¥å£
- é«˜å±‚é€šè¿‡æ¥å£ä½¿ç”¨ä½å±‚

### 3. æœ€å°ä¾èµ– (Minimal Dependencies)

- åªä¾èµ–å¿…éœ€çš„åŒ…
- å‡å°‘è€¦åˆï¼Œæé«˜ç‹¬ç«‹æ€§
- æ”¯æŒå¢é‡éƒ¨ç½²

## ğŸ”— ä¾èµ–è§„åˆ™

### âœ… å…è®¸

```
L6 â†’ L5, L4, L3, L2, L1
L5 â†’ L4, L3, L2, L1
L4 â†’ L3, L2, L1
L3 â†’ L2, L1
L2 â†’ L1
```

### âŒ ç¦æ­¢

```
L1 â†’ ä»»ä½•å…¶ä»–å±‚
L2 â†’ L3+
L3 â†’ L4+
åŒå±‚äº’ç›¸ä¾èµ–
```

## ğŸ“Š æ¶æ„æŒ‡æ ‡

| æŒ‡æ ‡          | æ•°å€¼   | çŠ¶æ€ |
| ------------- | ------ | ---- |
| æ€»åŒ…æ•°        | 9      | âœ…   |
| æ€»æ¨¡å—æ•°      | 138+   | âœ…   |
| æµ‹è¯•æ•°        | 1,200+ | âœ…   |
| æ¶æ„è¿è§„      | 0      | âœ…   |
| Layeræ ‡è®°è¦†ç›– | 100%   | âœ…   |
| æµ‹è¯•é€šè¿‡ç‡    | 99.7%  | âœ…   |

## ğŸ“š æ·±å…¥é˜…è¯»

- [åŒ…ç»“æ„ä¸ä¾èµ–](./package-structure.md) - è¯¦ç»†çš„åŒ…ä¾èµ–å›¾
- [åˆ†å±‚è®¾è®¡è¯¦è§£](./layer-design.md) - å„å±‚è®¾è®¡ç†å¿µ
- [é‡æ„å†å²](./restructuring-history.md) - æ¶æ„æ¼”è¿›è¿‡ç¨‹
- [è®¾è®¡å†³ç­–è®°å½•](./design-decisions/) - é‡è¦æ¶æ„å†³ç­–

## ğŸš€ å¿«é€Ÿå¼€å§‹

ä»è¿™é‡Œå¼€å§‹ä½¿ç”¨ SAGE:

- [å®‰è£…æŒ‡å—](../getting-started/installation.md)
- [5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹](../getting-started/quickstart.md)
- [ç¬¬ä¸€ä¸ª Pipeline](../getting-started/first-pipeline.md)
