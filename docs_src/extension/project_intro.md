
# SAGE æ‰©å±•ä½“ç³»æ¦‚è§ˆ

SAGE çš„ C++ æ‰©å±•é€šè¿‡ Python åŒ…å‘½åç©ºé—´ç»Ÿä¸€æš´éœ²ï¼Œæ ¸å¿ƒç›®å½•ä½äºï¼š

- `packages/sage/src/sage`
- `packages/sage-common/src/sage`
- `packages/sage-libs/src/sage`
- `packages/sage-kernel/src/sage`
- `packages/sage-middleware/src/sage`

è¿™äº›ç›®å½•ä¸‹çš„ `__init__.py` æ–‡ä»¶ä¼šé€šè¿‡å¦‚ä¸‹è¯­å¥æ‰©å±•å‘½åç©ºé—´ï¼Œä»¥ä¾¿è¯­è¨€æœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«å¹¶è¡¥å…¨å„ä¸ªå­æ¨¡å—ï¼š

```python
# æ‰©å±•å‘½åç©ºé—´åŒ…è·¯å¾„ä»¥æ”¯æŒå­åŒ…
__path__ = __import__("pkgutil").extend_path(__path__, __name__)
```

ç‰ˆæœ¬ä¿¡æ¯ç”± `packages/sage/src/sage/_version.py` ç»Ÿä¸€ç»´æŠ¤ï¼Œå¹¶åœ¨ `packages/sage/pyproject.toml` ä¸­é€šè¿‡ `version = { attr = "sage._version.__version__" }` è‡ªåŠ¨æ³¨å…¥ï¼Œç¡®ä¿æ‰€æœ‰æ‰©å±•ä½¿ç”¨ä¸€è‡´çš„ç‰ˆæœ¬å·ã€‚

å½“å‰é‡ç‚¹ç»´æŠ¤çš„åŸç”Ÿæ‰©å±•åŒ…æ‹¬ **SAGE DB** ä¸ **SAGE Flow**ï¼Œåç»­è¿˜ä¼šé™†ç»­æ‰©å±•æ›´å¤šé«˜æ€§èƒ½èƒ½åŠ›ã€‚

## ğŸ” SAGE DB â€” é«˜æ€§èƒ½å‘é‡æ•°æ®åº“æ‰©å±•

SAGE DB æ˜¯åŸºäº FAISS çš„åŸç”Ÿå‘é‡æ•°æ®åº“æ‰©å±•ï¼Œæä¾›é«˜ç»´å‘é‡æ£€ç´¢ä¸å¤æ‚æŸ¥è¯¢èƒ½åŠ›ã€‚

- **æ ¸å¿ƒèƒ½åŠ›**
	- å‘é‡ç´¢å¼•ç®¡ç†ï¼šæ”¯æŒ `IndexType.AUTO`ã€IVFã€HNSW ç­‰å¤šç§ç´¢å¼•ç±»å‹ï¼Œå¯æŒ‰éœ€åˆ‡æ¢ã€‚
	- å…ƒæ•°æ®ä¸æ··åˆæ£€ç´¢ï¼šæä¾› `filtered_search`ã€`hybrid_search` ç­‰ API åŒæ—¶å¤„ç†å‘é‡ä¸æ–‡æœ¬æ¡ä»¶ã€‚
	- å¤šæ¨¡æ€å¢å¼ºï¼šåœ¨ `multimodal_sage_db` ä¸­æ‰©å±•äº†å¤šæ¨¡æ€å¤„ç†ã€èåˆç®—æ³•ä¸åŠ æƒç­–ç•¥ã€‚
	- Python/CPP åŒæ ˆï¼š`python/sage_db.py` æš´éœ² Python APIï¼ŒåŒæ—¶ç»´æŠ¤ C++ æµ‹è¯•ä¸ç¤ºä¾‹ã€‚
- **å…¸å‹åœºæ™¯**
	- æ„å»ºä¼ä¸šçº§å‘é‡æ£€ç´¢æœåŠ¡ã€‚
	- æ”¯æŒ RAGã€è¯­ä¹‰æœç´¢ä¸å¤šæ¨¡æ€æ•°æ®èåˆã€‚
	- å¤§è§„æ¨¡æ‰¹é‡å¯¼å…¥ä¸ç¦»çº¿ç´¢å¼•æ„å»ºã€‚
- **ç›®å½•ä¸èµ„æº**
	- `packages/sage-middleware/src/sage/middleware/components/sage_db/`
	- æ–‡æ¡£ï¼š`docs/multimodal_fusion_design.md`
	- ç¤ºä¾‹ï¼š`examples/`ã€`tests/`
- **å®‰è£…ä¸æ£€æµ‹**
	- `sage extensions install sage_db`
	- `sage extensions status` å¯æŸ¥çœ‹æ‰©å±•ç¼–è¯‘ç»“æœï¼Œ`tools/tests/test_cpp_extensions.py` å«æœ‰å¯ç”¨æ€§è‡ªæ£€ã€‚

## ğŸŒŠ SAGE Flow â€” å‘é‡æµå¼å¤„ç†å¼•æ“

SAGE Flow é¢å‘å®æ—¶æµåœºæ™¯ï¼Œæä¾›å‘é‡çº§åˆ«çš„çª—å£è®¡ç®—ä¸çŠ¶æ€å¿«ç…§èƒ½åŠ›ã€‚

- **æ ¸å¿ƒèƒ½åŠ›**
	- å‘é‡æµç®—å­ï¼šå†…ç½® `StreamEnvironment`ã€`Stream`ã€`SimpleStreamSource` ç­‰ï¼Œæ”¯æŒ TopKã€Filterã€Join ç­‰é€»è¾‘ã€‚
	- ä½å»¶è¿Ÿæ›´æ–°ï¼šé€šè¿‡ä¸‰é˜¶æ®µæµæ°´çº¿ï¼ˆå†™å…¥ã€çŠ¶æ€ç‰©åŒ–ã€å¿«ç…§æš´éœ²ï¼‰å®ç°æ¯«ç§’çº§å¢é‡æ›´æ–°ã€‚
	- RAG å‹å¥½ï¼šåœ¨å¤„ç†æµæ•°æ®çš„åŒæ—¶ä¸å‘é‡æ•°æ®åº“ä¿æŒå®æ—¶åŒæ­¥ï¼Œé€‚åˆ LLM åœºæ™¯ã€‚
	- Python APIï¼š`python/sage_flow.py` å¯¹å¤–æä¾› `SageFlow` ç±»ä¸å¿«æ·å·¥å‚æ–¹æ³•ï¼Œç®€åŒ–ä¸Šå±‚é›†æˆã€‚
- **å…¸å‹åœºæ™¯**
	- å®æ—¶å¯¹è¯/Agent ç³»ç»Ÿçš„åŠ¨æ€è¯­å¢ƒç»´æŠ¤ã€‚
	- é«˜é€Ÿä¼ æ„Ÿå™¨/è¡Œä¸ºæ—¥å¿—çš„å®æ—¶èšåˆã€‚
	- ç»“åˆ SAGE DB çš„è”åŠ¨å¤„ç†ä¸å®æ—¶æ¨ç†ã€‚
- **ç›®å½•ä¸èµ„æº**
	- `packages/sage-middleware/src/sage/middleware/components/sage_flow/`
	- æ–‡æ¡£ï¼š`docs/Design.md`ã€`docs/Structure.md`
	- ç¤ºä¾‹ï¼š`examples/`ã€`test/` ä¸­çš„é›†æˆæ¡ˆä¾‹ã€‚
- **å®‰è£…ä¸æ£€æµ‹**
	- `sage extensions install sage_flow`
	- æ„å»ºè„šæœ¬ `build.sh` å¯è‡ªåŠ¨æ‹‰èµ·ä¾èµ–ï¼›`tools/tests/test_cpp_extensions.py` è¦†ç›–åŠ è½½æ ¡éªŒã€‚

## ğŸ› ï¸ æ‰©å±•å®‰è£…ä¸æ’éšœ

ä½¿ç”¨ `sage extensions` CLI å¯ä»¥ç»Ÿä¸€å®‰è£…ã€æŸ¥çœ‹å’Œæ¸…ç†æ‰©å±•ï¼š

- `sage extensions install`ï¼šå®‰è£…å…¨éƒ¨å·²æ”¯æŒæ‰©å±•ã€‚
- `sage extensions install sage_db` / `sage extensions install sage_flow`ï¼šæŒ‰éœ€å®‰è£…å•ä¸ªæ‰©å±•ã€‚
- `sage extensions status`ï¼šæ£€æŸ¥æ‰©å±•ç¼–è¯‘çŠ¶æ€ä¸ç³»ç»Ÿä¾èµ–ã€‚
- `sage extensions clean`ï¼šæ¸…ç†å†å²æ„å»ºäº§ç‰©ï¼Œæ–¹ä¾¿é‡æ–°ç¼–è¯‘ã€‚

æ‰©å±•åœ¨è¿è¡Œæ—¶é€šè¿‡ `sage.middleware.components.extensions_compat` æ¨¡å—è‡ªåŠ¨æ£€æµ‹å¯ç”¨æ€§ï¼Œè‹¥ç¼ºå¤±ä¼šç»™å‡ºå®‰è£…æç¤ºã€‚

## ğŸš€ æ¼”è¿›è®¡åˆ’

ä¸ºäº†æ›´å¥½åœ°æ”¯æ’‘å¤šæ¨¡æ€ã€å®æ—¶å’Œä¼ä¸šçº§åœºæ™¯ï¼Œæˆ‘ä»¬ä¼šæŒç»­å¼•å…¥æ›´å¤šæ‰©å±•èƒ½åŠ›ï¼Œä¾‹å¦‚ï¼š

- æ›´ä¸°å¯Œçš„å‘é‡ç®—å­ä¸ GPU åŠ é€Ÿç®—å­ã€‚
- é’ˆå¯¹è¡Œä¸šåœºæ™¯çš„ä¸“ç”¨ç´¢å¼•ä¸èåˆç­–ç•¥ã€‚
- ä¸å¤–éƒ¨ç³»ç»Ÿè”åŠ¨çš„æµå¼ connectorã€è°ƒåº¦å™¨ç­‰ã€‚

æ¬¢è¿åœ¨ `packages/sage-middleware/src/sage/middleware/components/` ä¸‹æäº¤æ–°çš„æ‰©å±•æ–¹æ¡ˆæˆ– Issueï¼Œä¸€èµ·å®Œå–„ SAGE çš„æ‰©å±•ç”Ÿæ€ã€‚


